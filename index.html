<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spelling Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        max-width: 700px;
        margin: auto;
    }
    h1 { text-align: center; }
    textarea, input {
        width: 100%;
        font-size: 16px;
        padding: 10px;
        margin-top: 8px;
    }
    button {
        width: 100%;
        padding: 12px;
        margin-top: 10px;
        font-size: 18px;
    }
    #feedback {
        font-size: 20px;
        margin-top: 10px;
        text-align: center;
    }
</style>
</head>
<body>

<h1>Spelling Game</h1>

<h3>Paste Word List</h3>
<textarea id="bulkWords" rows="6" placeholder="Paste a list like:
1. apple
2. banana
3.  dog
4) pizza"></textarea>

<button onclick="loadWords()">Load Word Bank</button>

<p><strong>Current Word Bank:</strong></p>
<p id="wordBankDisplay">(empty)</p>

<hr>

<button onclick="startGame()">Start 20-Word Round</button>

<div id="gameBox" style="display:none;">
    <h3>Word <span id="currentNumber">1</span> of 20</h3>
    <button onclick="speakWord()">üîä Hear Word</button>
    <input id="playerInput" placeholder="Spell the word">
    <button onclick="submitAnswer()">Submit</button>
    <div id="feedback"></div>
    <h3>Score: <span id="score">0</span></h3>
</div>

<script>
// -----------------------------------------
// CLEAN & LOAD WORD LIST
// -----------------------------------------
let wordBank = [];

function loadWords() {
    const text = document.getElementById("bulkWords").value;

    // Split into lines, clean, strip numbers/punctuation
    const cleaned = text
        .split(/\n/)
        .map(line => line
            .replace(/^[\s\d\.\-\)\(]+/, "")  // remove leading numbers/bullets
            .replace(/[^a-zA-Z]/g, "")        // keep letters only
            .toLowerCase().trim()
        )
        .filter(w => w.length > 0);

    // Remove duplicates
    wordBank = [...new Set(cleaned)];

    document.getElementById("wordBankDisplay").innerText =
        wordBank.join(", ") || "(empty)";
}

// -----------------------------------------
// GAME VARIABLES
// -----------------------------------------
let currentWord = "";
let roundCount = 0;
let score = 0;

// -----------------------------------------
// START GAME
// -----------------------------------------
function startGame() {
    if (wordBank.length < 20) {
        alert("Please load at least 20 words.");
        return;
    }

    score = 0;
    roundCount = 0;
    document.getElementById("score").innerText = score;

    document.getElementById("gameBox").style.display = "block";

    nextWord();
}

// -----------------------------------------
// NEXT WORD
// -----------------------------------------
function nextWord() {
    if (roundCount >= 20) {
        alert(`Round Complete! Final Score: ${score} / 20`);
        document.getElementById("gameBox").style.display = "none";
        return;
    }

    roundCount++;
    document.getElementById("currentNumber").innerText = roundCount;

    currentWord = wordBank[Math.floor(Math.random() * wordBank.length)];

    speakWord();

    document.getElementById("playerInput").value = "";
    document.getElementById("feedback").innerHTML = "";
}

// -----------------------------------------
// TEXT-TO-SPEECH
// -----------------------------------------
function speakWord() {
    const u = new SpeechSynthesisUtterance(currentWord);
    u.rate = 0.9;
    u.pitch = 1;
    speechSynthesis.speak(u);
}

// -----------------------------------------
// SUBMIT ANSWER
// -----------------------------------------
function submitAnswer() {
    const guess = document.getElementById("playerInput").value.trim().toLowerCase();

    if (guess === currentWord) {
        score++;
        document.getElementById("score").innerText = score;
        document.getElementById("feedback").innerHTML = "‚úÖ Correct!";
    } else {
        document.getElementById("feedback").innerHTML =
            `‚ùå Incorrect. Correct spelling: <strong>${currentWord}</strong>`;
    }

    setTimeout(nextWord, 1200);
}
</script>

</body>
</html>
